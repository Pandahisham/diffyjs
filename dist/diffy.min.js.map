{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 88cc3dc618c7f7afb6e6","webpack:///./src/index.js","webpack:///./src/Diffy.js","webpack:///./src/raf.js","webpack:///./src/capture.js","webpack:///./src/utils.js"],"names":["create","resolution","console","log","tickFn","captureFn","debug","Diffy","captureConfig","audio","video","width","height","sourceDimensions","w","h","onTick","values","onMotion","sensitivity","containerClassName","x","y","bind","window","currentImageData","previousImageData","resolutionX","resolutionY","sourceWidth","sourceHeight","addEventListener","init","blob","videoEl","src","canvas","getContext","drawImage","ctx","translate","scale","frame1","frame2","length","data1","data","data2","buffer","ArrayBuffer","getImageData","compare","toCanvas","rawCanvasEl","loop","createElements","then","blendCanvasEl","forEach","mirror","toVideo","containerEl","document","createElement","className","setAttribute","headerEl","titleEl","innerText","toggleEl","appendChild","body","options","instanceExists","Error","bool","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","getUserMedia","constraints","successCallback","errorCallback","navigator","webkitGetUserMedia","mozGetUserMedia","Promise","reject","call","mediaDevices","undefined","capture","stream","URL","createObjectURL","catch","name","message","error","createOnceLog","counter","onceLog","arguments","$","selector","querySelector","round","number"],"mappings":"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","file":"diffy.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"diffy\"] = factory();\n\telse\n\t\troot[\"diffy\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 88cc3dc618c7f7afb6e6","/* eslint-disable no-console */\n\nimport Diffy from './Diffy';\nimport requestAnimFrame from './raf';\nimport capture from './capture';\nimport {\n  createOnceLog,\n  $,\n  round\n} from './utils';\n\n\nexport const create = ({ resolution }) => {\n  console.log('Create called');\n  return Diffy.create({\n    tickFn: requestAnimFrame,\n    captureFn: capture,\n    debug: true,\n    resolution\n  });\n\n}\n\n\n// /**/\n// const $debug = $('#diffy-debug');\n\n// /**/\n// const $toggle = $('#diffy-toggle');\n\n// /**/\n// const $video = $('#diffy-video');\n\n// /**/\n// const $rawCanvas = $('#diffy-raw-canvas');\n\n// /* */\n// const rawCtx = $rawCanvas.getContext('2d');\n\n// /* */\n// const rawWidth = $rawCanvas.width;\n\n// /* */\n// const rawHeight = $rawHeight.height;\n\n// /* */\n// const $blendCanvas = $('#diffy-blend-canvas');\n\n// /* */\n// const blendCtx = $blendCanvas.getContext('2d');\n\n// /* */\n// const blendWidth = $blendCanvas.width;\n\n// /* */\n// const blendHeight = $blendCanvas.height;\n\n// /* */\n// const blendImageData = blendCtx.getImageData(0, 0, blendWidth, blendHeight);\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","\nexport default class Diffy {\n  constructor({\n    tickFn = () => {},\n    captureFn = () => {},\n    captureConfig = {\n      audio: false,\n      video: {\n        width: 130,\n        height: 100\n      }\n    },\n    debug = false,\n    sourceDimensions = { w: 130, h: 100 },\n    onTick = (values) => {},\n    onMotion = (values) => {},\n    sensitivity = 0.5,\n    containerClassName = 'diffy--debug-view',\n    resolution = { x: 10, y: 5 }\n  }) {\n\n    this.tickFn = tickFn.bind(window);\n    this.captureFn = captureFn;\n\n    this.currentImageData = null;\n    this.previousImageData = null;\n\n    this.resolutionX = resolution.x;\n    this.resolutionY = resolution.y;\n\n    this.sensitivity = sensitivity;\n\n    this.debug = debug;\n    this.containerClassName = containerClassName;\n\n    this.captureConfig = captureConfig;\n\n    this.sourceWidth = sourceDimensions.w;\n    this.sourceHeight = sourceDimensions.h;\n\n\n    // console.log('tickFn: ', this.tickFn);\n    // console.log('captureFn: ', this.captureFn);\n    // console.log('debug: ', this.debug);\n    // console.log('className: ', this.containerClassName);\n    // console.log('resolution: ', this.resolutionX, this.resolutionY);\n\n\n\n    window.addEventListener('load', this.init.bind(this));\n\n  }\n\n  toVideo(blob, videoEl) {\n    // piping blob to video element\n    videoEl.src = blob;\n  }\n\n  toCanvas(video, canvas) {\n    // piping video to canvas\n    canvas\n      .getContext('2d')\n      .drawImage(video, 0, 0, canvas.width, canvas.height);\n  }\n\n\n  mirror(canvas) {\n    const ctx = canvas.getContext('2d');\n    ctx.translate(canvas.width, 0);\n    ctx.scale(-1, 1);\n    return canvas;\n  }\n\n  compare(frame1, frame2) {\n    const length = frame1.length;\n    const data1 = frame1.data;\n    const data2 = frame2.data;\n\n    const buffer = new ArrayBuffer(length);\n\n  }\n\n  /*\n    blend two consecutive frames\n    returns imageData\n  */\n  blend(canvas) {\n    const ctx = canvas.getContext('2d');\n    const width = canvas.width;\n    const height = canvas.height;\n    this.currentImageData = ctx.getImageData(0, 0, width, height);\n    this.previousImageData = this.previousImageData || ctx.getImageData(0, 0, width, height);\n    this.compare(currentImageData, previousImageData);\n  }\n\n  loop() {\n    this.toCanvas(this.videoEl, this.rawCanvasEl);\n    this.tickFn(this.loop.bind(this));\n  }\n\n  init() {\n    // const loop = this.loop.bind(this);\n    console.log('DOM ready. Init...');\n    this.createElements(this.containerClassName);\n    this.captureFn(this.captureConfig).then((blob) => {\n      [this.rawCanvasEl, this.blendCanvasEl].forEach(this.mirror);\n      this.toVideo(blob, this.videoEl);\n      this.loop();\n    });\n  }\n\n  createElements(containerClassName) {\n    this.containerEl = document.createElement('div');\n    this.containerEl.className = containerClassName;\n\n    this.videoEl = document.createElement('video');\n    this.videoEl.className = 'debug--video';\n    this.videoEl.setAttribute('autoplay', '');\n    this.videoEl.width = this.sourceWidth;\n    this.videoEl.height = this.sourceHeight;\n\n    this.rawCanvasEl = document.createElement('canvas');\n    this.rawCanvasEl.className = 'debug--raw-canvas';\n    this.rawCanvasEl.width = this.sourceWidth;\n    this.rawCanvasEl.height = this.sourceHeight;\n\n    this.blendCanvasEl = document.createElement('canvas');\n    this.blendCanvasEl.className = 'debug--blend-canvas';\n    this.blendCanvasEl.width = this.sourceWidth;\n    this.blendCanvasEl.height = this.sourceHeight;\n\n\n    this.headerEl = document.createElement('div');\n    this.headerEl.className = 'debug--header';\n\n    this.titleEl = document.createElement('h6');\n    this.titleEl.className = 'debug--title';\n    this.titleEl.innerText = 'Diffy debug view';\n\n    this.toggleEl = document.createElement('span');\n    this.toggleEl.innerText = '-';\n\n    this.headerEl.appendChild(this.toggleEl);\n    this.headerEl.appendChild(this.titleEl);\n\n    this.containerEl.appendChild(this.headerEl);\n    this.containerEl.appendChild(this.videoEl);\n    this.containerEl.appendChild(this.rawCanvasEl);\n    this.containerEl.appendChild(this.blendCanvasEl);\n\n    document.body.appendChild(this.containerEl);\n  }\n\n\n  static get VERSION() {\n    return '1.0.0';\n  }\n\n  static get instanceExists() {\n    return false;\n  }\n\n  static set instanceExists(bool) {\n    Diffy.instanceExists = bool;\n  }\n\n\n  static create(options) {\n    if(Diffy.instanceExists) {\n      throw new Error(`It seems a diffy instance\n      already exists on this page.`);\n    }\n\n    return new this(options);\n    Diffy.instanceExists = true;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Diffy.js","/*\n  shim requestAnimationFrame api\n  source: http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/\n*/\nconst requestAnimFrame =\n  window.requestAnimationFrame       ||\n  window.webkitRequestAnimationFrame ||\n  window.mozRequestAnimationFrame    ||\n  window.oRequestAnimationFrame      ||\n  window.msRequestAnimationFrame     ||\n  function(callback) {\n    window.setTimeout(callback, 1000 / 60);\n  };\n\nexport default requestAnimFrame;\n\n\n\n// WEBPACK FOOTER //\n// ./src/raf.js","/* eslint-disable no-unused-vars */\n/* eslint-disable no-console */\n/*\n  shim getUserMedia with a Promise api\n  source: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n*/\nconst getUserMedia = (constraints, successCallback, errorCallback) => {\n\n  // First get a hold of getUserMedia, if present\n  const getUserMedia = (navigator.getUserMedia ||\n      navigator.webkitGetUserMedia ||\n      navigator.mozGetUserMedia);\n\n  // Some browsers just don't implement it - return a rejected promise with an error\n  // to keep a consistent interface\n  if(!getUserMedia) {\n    return Promise.reject(new Error('getUserMedia is not implemented in this browser'));\n  }\n\n  // Otherwise, wrap the call to the old navigator.getUserMedia with a Promise\n  return new Promise((successCallback, errorCallback) => {\n    getUserMedia.call(navigator, constraints, successCallback, errorCallback);\n  });\n\n}\n\n// Older browsers might not implement mediaDevices at all, so we set an empty object first\nif(navigator.mediaDevices === undefined) {\n  navigator.mediaDevices = {};\n}\n\n// Some browsers partially implement mediaDevices. We can't just assign an object\n// with getUserMedia as it would overwrite existing properties.\n// Here, we will just add the getUserMedia property if it's missing.\nif(navigator.mediaDevices.getUserMedia === undefined) {\n  navigator.mediaDevices.getUserMedia = getUserMedia;\n}\n\n/*\n  capture from camera\n  returns objectUrl\n */\nconst capture = (constraints) => {\n  return navigator.mediaDevices.getUserMedia(constraints)\n    .then((stream) => window.URL.createObjectURL(stream))\n    .catch(({ name, message }) => console.error(`${name} : ${message}`));\n}\n\nexport default capture;\n\n\n\n// WEBPACK FOOTER //\n// ./src/capture.js","/* eslint-disable no-console */\n\n/*\n  utility function to log only once\n  useful for logging in loops\n*/\nexport const createOnceLog = () => {\n  let counter = 0;\n  return function onceLog() {\n    if(counter < 1) {\n      console.log(...arguments);\n    }\n    counter ++;\n  }\n}\n\n/*\n  utility function for getting DOM references\n  return DOM Object\n*/\nexport const $ = (selector) => document.querySelector(selector);\n\n/*\n  bitwise Math.round\n  returns number\n*/\nexport const round = (number) => (number + .5) >> 0;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js"],"sourceRoot":""}