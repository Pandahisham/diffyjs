{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 656fcfd9744cb52cb75f","webpack:///./src/index.js","webpack:///./src/raf.js","webpack:///./src/capture.js","webpack:///./src/utils.js"],"names":["instanceExists","VERSION","onceLog_1","currentImageData","previousImageData","$debug","$toggle","$video","$rawCanvas","rawCtx","getContext","rawWidth","width","rawHeight","$rawHeight","height","$blendCanvas","blendCtx","blendWidth","blendHeight","blendImageData","getImageData","createDebugView","className","container","document","createElement","video","rawCanvas","blendCanvas","header","title","innerText","toggle","appendChild","body","toVideo","toCanvas","constraints","audio","create","debug","debugViewClassName","resolution","resolutionX","x","resolutionY","y","Error","window","loop","console","log","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","getUserMedia","successCallback","errorCallback","navigator","webkitGetUserMedia","mozGetUserMedia","Promise","reject","call","mediaDevices","undefined","capture","then","stream","URL","createObjectURL","catch","name","message","error","createOnceLog","counter","onceLog","arguments","$","selector","querySelector","round","number"],"mappings":"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","file":"diffy.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"diffy\"] = factory();\n\telse\n\t\troot[\"diffy\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 656fcfd9744cb52cb75f","/* eslint-disable no-console */\n\n// import ReadableStream from 'readable-stream';\nimport requestAnimFrame from './raf';\nimport capture from './capture';\nimport {\n  createOnceLog,\n  $,\n  round\n} from './utils';\n\n/* allow only one instance per webpage */\nlet instanceExists = false;\n\n/* version */\nconst VERSION = '1.0.0';\n\n/* logger instances */\nconst onceLog_1 = createOnceLog();\n\n/* */\nconst currentImageData = null;\n\n/**/\nconst previousImageData = null;\n\n/**/\nconst $debug = $('#diffy-debug');\n\n/**/\nconst $toggle = $('#diffy-toggle');\n\n/**/\nconst $video = $('#diffy-video');\n\n/**/\nconst $rawCanvas = $('#diffy-raw-canvas');\n\n/* */\nconst rawCtx = $rawCanvas.getContext('2d');\n\n/* */\nconst rawWidth = $rawCanvas.width;\n\n/* */\nconst rawHeight = $rawHeight.height;\n\n/* */\nconst $blendCanvas = $('#diffy-blend-canvas');\n\n/* */\nconst blendCtx = $blendCanvas.getContext('2d');\n\n/* */\nconst blendWidth = $blendCanvas.width;\n\n/* */\nconst blendHeight = $blendCanvas.height;\n\n/* */\nconst blendImageData = blendCtx.getImageData(0, 0, blendWidth, blendHeight);\n\n/* */\nconst createDebugView = (className) => {\n  const container = document.createElement('div');\n  container.className = className;\n  const video = document.createElement('video');\n  video.className = 'debug--video';\n  const rawCanvas = document.createElement('canvas');\n  rawCanvas.className = 'debug--raw-canvas';\n  const blendCanvas = document.createElement('div');\n  blendCanvas.className = 'debug--blend-canvas';\n\n  const header = document.createElement('div');\n  header.className = 'debug--header';\n  const title = document.createElement('h6');\n  title.className = 'debug--title';\n  title.innerText = 'diffy debug view';\n  const toggle = document.createElement('span');\n  toggle.innerText = '-';\n  header.appendChild(toggle);\n  header.appendChild(title);\n\n  container.appendChild(header);\n  container.appendChild(video);\n  container.appendChild(rawCanvas);\n  container.appendChild(blendCanvas);\n\n  document.body.appendChild('container');\n};\n\n/* */\nconst toVideo = () => {\n\n}\n\n/* */\nconst toCanvas = () => {\n\n};\n\n\n/* constraints object for getUserMedia */\nconst constraints = {\n  audio: false,\n  video: {\n    width: 260,\n    height: 200\n  }\n};\n\nexport const create = ({\n  debug = false,\n  debugViewClassName = 'diffy--debug-view',\n  resolution: {\n    x: resolutionX,\n    y: resolutionY\n  }\n}) => {\n\n  if (instanceExists) {\n    throw new Error('It seems like an instance of diffy has already been created in this page.');\n  }\n\n\n  if(!window) {\n    throw new Error('Diffy is meant for use in the browser environment.');\n  }\n\n  if (debug) {\n    createDebugView();\n  }\n\n  instanceExists = true;\n};\n\nexport default {\n  VERSION,\n  create\n}\n\n// export default class Diffy {\n//   constructor(props) {\n//     this.foo = props;\n//     this.stream = new ReadableStream();\n//   }\n\n//   createStream() {\n//     console.log('create stream here');\n//   }\n// }\n\nconst loop = () => {\n  onceLog_1('Loop is running.');\n  requestAnimFrame(loop);\n};\n\nloop();\n\nconsole.log(capture(constraints));\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","/*\n  shim requestAnimationFrame api\n  source: http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/\n*/\nconst requestAnimFrame =\n  window.requestAnimationFrame       ||\n  window.webkitRequestAnimationFrame ||\n  window.mozRequestAnimationFrame    ||\n  window.oRequestAnimationFrame      ||\n  window.msRequestAnimationFrame     ||\n  function(callback) {\n    window.setTimeout(callback, 1000 / 60);\n  };\n\nexport default requestAnimFrame;\n\n\n\n// WEBPACK FOOTER //\n// ./src/raf.js","/* eslint-disable no-unused-vars */\n/* eslint-disable no-console */\n/*\n  shim getUserMedia with a Promise api\n  source: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n*/\nconst getUserMedia = (constraints, successCallback, errorCallback) => {\n\n  // First get a hold of getUserMedia, if present\n  const getUserMedia = (navigator.getUserMedia ||\n      navigator.webkitGetUserMedia ||\n      navigator.mozGetUserMedia);\n\n  // Some browsers just don't implement it - return a rejected promise with an error\n  // to keep a consistent interface\n  if(!getUserMedia) {\n    return Promise.reject(new Error('getUserMedia is not implemented in this browser'));\n  }\n\n  // Otherwise, wrap the call to the old navigator.getUserMedia with a Promise\n  return new Promise((successCallback, errorCallback) => {\n    getUserMedia.call(navigator, constraints, successCallback, errorCallback);\n  });\n\n}\n\n// Older browsers might not implement mediaDevices at all, so we set an empty object first\nif(navigator.mediaDevices === undefined) {\n  navigator.mediaDevices = {};\n}\n\n// Some browsers partially implement mediaDevices. We can't just assign an object\n// with getUserMedia as it would overwrite existing properties.\n// Here, we will just add the getUserMedia property if it's missing.\nif(navigator.mediaDevices.getUserMedia === undefined) {\n  navigator.mediaDevices.getUserMedia = getUserMedia;\n}\n\n/*\n  capture from camera\n  returns objectUrl\n */\nconst capture = (constraints) => {\n  return navigator.mediaDevices.getUserMedia(constraints)\n    .then((stream) => window.URL.createObjectURL(stream))\n    .catch(({ name, message }) => console.error(`${name} : ${message}`));\n}\n\nexport default capture;\n\n\n\n// WEBPACK FOOTER //\n// ./src/capture.js","/* eslint-disable no-console */\n\n/*\n  utility function to log only once\n  useful for logging in loops\n*/\nexport const createOnceLog = () => {\n  let counter = 0;\n  return function onceLog() {\n    if(counter < 1) {\n      console.log(...arguments);\n    }\n    counter ++;\n  }\n}\n\n/*\n  utility function for getting DOM references\n  return DOM Object\n*/\nexport const $ = (selector) => document.querySelector(selector);\n\n/*\n  bitwise Math.round\n  returns number\n*/\nexport const round = (number) => (number + .5) >> 0;\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js"],"sourceRoot":""}