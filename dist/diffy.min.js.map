{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///diffy.min.js","webpack:///webpack/bootstrap 2da831bf345fd11ea350","webpack:///./src/index.js","webpack:///./src/Diffy.js","webpack:///./src/worker.js","webpack:///./~/worker-loader/createInlineWorker.js","webpack:///./src/utils.js","webpack:///./src/raf.js","webpack:///./src/capture.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","create","undefined","_Diffy","_Diffy2","_raf","_raf2","_capture","_capture2","_ref","resolution","console","log","tickFn","captureFn","debug","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","_worker","_worker2","_utils","Diffy","createOnceLog","_ref$tickFn","_ref$captureFn","_ref$captureConfig","captureConfig","audio","video","width","height","_ref$debug","_ref$sourceDimensions","sourceDimensions","w","h","_ref$sensitivity","onTick","onMotion","sensitivity","_ref$containerClassNa","containerClassName","_ref$resolution","x","y","bind","window","currentImageData","previousImageData","resolutionX","resolutionY","sourceWidth","sourceHeight","worker","initialized","addEventListener","init","blob","videoEl","src","canvas","getContext","drawImage","ctx","translate","scale","frame1","frame2","data1","data","data2","buffer","ArrayBuffer","postMessage","_ref2","blendImageData","set","Uint8ClampedArray","blendCanvasCtx","putImageData","getImageData","compare","toCanvas","rawCanvasEl","blend","loop","_this","drawBlendImage","createElements","blendCanvasEl","then","forEach","mirror","toVideo","containerEl","document","createElement","className","setAttribute","headerEl","titleEl","innerText","toggleEl","appendChild","body","options","instanceExists","Error","get","bool","URL","webkitURL","content","url","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","append","getBlob","e","Blob","Worker","createObjectURL","encodeURIComponent","counter","_console","apply","arguments","$","selector","querySelector","round","number","abs","polarize","threshold","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","getUserMedia","constraints","successCallback","errorCallback","navigator","webkitGetUserMedia","mozGetUserMedia","Promise","reject","mediaDevices","capture","stream","catch","name","message","error"],"mappings":"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","file":"diffy.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"diffy\"] = factory();\n\telse\n\t\troot[\"diffy\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"diffy\"] = factory();\n\telse\n\t\troot[\"diffy\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.create = undefined;\n\t\n\tvar _Diffy = __webpack_require__(2);\n\t\n\tvar _Diffy2 = _interopRequireDefault(_Diffy);\n\t\n\tvar _raf = __webpack_require__(6);\n\t\n\tvar _raf2 = _interopRequireDefault(_raf);\n\t\n\tvar _capture = __webpack_require__(7);\n\t\n\tvar _capture2 = _interopRequireDefault(_capture);\n\t\n\tvar _utils = __webpack_require__(5);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/* eslint-disable no-console */\n\t\n\tvar create = exports.create = function create(_ref) {\n\t  var resolution = _ref.resolution;\n\t\n\t  console.log('Create called');\n\t  return _Diffy2.default.create({\n\t    tickFn: _raf2.default,\n\t    captureFn: _capture2.default,\n\t    debug: true,\n\t    resolution: resolution\n\t  });\n\t};\n\t\n\t// /**/\n\t// const $debug = $('#diffy-debug');\n\t\n\t// /**/\n\t// const $toggle = $('#diffy-toggle');\n\t\n\t// /**/\n\t// const $video = $('#diffy-video');\n\t\n\t// /**/\n\t// const $rawCanvas = $('#diffy-raw-canvas');\n\t\n\t// /* */\n\t// const rawCtx = $rawCanvas.getContext('2d');\n\t\n\t// /* */\n\t// const rawWidth = $rawCanvas.width;\n\t\n\t// /* */\n\t// const rawHeight = $rawHeight.height;\n\t\n\t// /* */\n\t// const $blendCanvas = $('#diffy-blend-canvas');\n\t\n\t// /* */\n\t// const blendCtx = $blendCanvas.getContext('2d');\n\t\n\t// /* */\n\t// const blendWidth = $blendCanvas.width;\n\t\n\t// /* */\n\t// const blendHeight = $blendCanvas.height;\n\t\n\t// /* */\n\t// const blendImageData = blendCtx.getImageData(0, 0, blendWidth, blendHeight);\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _worker = __webpack_require__(3);\n\t\n\tvar _worker2 = _interopRequireDefault(_worker);\n\t\n\tvar _utils = __webpack_require__(5);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t// tmp\n\tvar logger_1 = (0, _utils.createOnceLog)();\n\t\n\tvar Diffy = function () {\n\t  function Diffy(_ref) {\n\t    var _ref$tickFn = _ref.tickFn,\n\t        tickFn = _ref$tickFn === undefined ? function () {} : _ref$tickFn,\n\t        _ref$captureFn = _ref.captureFn,\n\t        captureFn = _ref$captureFn === undefined ? function () {} : _ref$captureFn,\n\t        _ref$captureConfig = _ref.captureConfig,\n\t        captureConfig = _ref$captureConfig === undefined ? {\n\t      audio: false,\n\t      video: {\n\t        width: 130,\n\t        height: 100\n\t      }\n\t    } : _ref$captureConfig,\n\t        _ref$debug = _ref.debug,\n\t        debug = _ref$debug === undefined ? false : _ref$debug,\n\t        _ref$sourceDimensions = _ref.sourceDimensions,\n\t        sourceDimensions = _ref$sourceDimensions === undefined ? { w: 130, h: 100 } : _ref$sourceDimensions,\n\t        _ref$onTick = _ref.onTick,\n\t        onTick = _ref$onTick === undefined ? function (values) {} : _ref$onTick,\n\t        _ref$onMotion = _ref.onMotion,\n\t        onMotion = _ref$onMotion === undefined ? function (values) {} : _ref$onMotion,\n\t        _ref$sensitivity = _ref.sensitivity,\n\t        sensitivity = _ref$sensitivity === undefined ? 0.5 : _ref$sensitivity,\n\t        _ref$containerClassNa = _ref.containerClassName,\n\t        containerClassName = _ref$containerClassNa === undefined ? 'diffy--debug-view' : _ref$containerClassNa,\n\t        _ref$resolution = _ref.resolution,\n\t        resolution = _ref$resolution === undefined ? { x: 10, y: 5 } : _ref$resolution;\n\t\n\t    _classCallCheck(this, Diffy);\n\t\n\t    this.tickFn = tickFn.bind(window);\n\t    this.captureFn = captureFn;\n\t\n\t    this.currentImageData = null;\n\t    this.previousImageData = null;\n\t\n\t    this.resolutionX = resolution.x;\n\t    this.resolutionY = resolution.y;\n\t\n\t    this.sensitivity = sensitivity;\n\t\n\t    this.debug = debug;\n\t    this.containerClassName = containerClassName;\n\t\n\t    this.captureConfig = captureConfig;\n\t\n\t    this.sourceWidth = sourceDimensions.w;\n\t    this.sourceHeight = sourceDimensions.h;\n\t\n\t    this.worker = new _worker2.default();\n\t\n\t    this.initialized = false;\n\t\n\t    // console.log('tickFn: ', this.tickFn);\n\t    // console.log('captureFn: ', this.captureFn);\n\t    // console.log('debug: ', this.debug);\n\t    // console.log('className: ', this.containerClassName);\n\t    // console.log('resolution: ', this.resolutionX, this.resolutionY);\n\t\n\t\n\t    window.addEventListener('load', this.init.bind(this));\n\t  }\n\t\n\t  _createClass(Diffy, [{\n\t    key: 'toVideo',\n\t    value: function toVideo(blob, videoEl) {\n\t      // piping blob to video element\n\t      videoEl.src = blob;\n\t    }\n\t  }, {\n\t    key: 'toCanvas',\n\t    value: function toCanvas(video, canvas) {\n\t      // piping video to canvas\n\t      canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);\n\t    }\n\t  }, {\n\t    key: 'mirror',\n\t    value: function mirror(canvas) {\n\t      var ctx = canvas.getContext('2d');\n\t      ctx.translate(canvas.width, 0);\n\t      ctx.scale(-1, 1);\n\t      return canvas;\n\t    }\n\t  }, {\n\t    key: 'compare',\n\t    value: function compare(frame1, frame2) {\n\t      var length = frame1.length;\n\t      var data1 = frame1.data;\n\t      var data2 = frame2.data;\n\t\n\t      var buffer = new ArrayBuffer(length);\n\t      // console.log(this.sourceWidth, this.sourceHeight);\n\t      this.worker.postMessage({\n\t        buffer: buffer,\n\t        data1: data1,\n\t        data2: data2,\n\t        sensitivity: this.sensitivity,\n\t        width: this.sourceWidth,\n\t        height: this.sourceHeight\n\t      });\n\t    }\n\t  }, {\n\t    key: 'drawBlendImage',\n\t    value: function drawBlendImage(_ref2) {\n\t      var data = _ref2.data;\n\t\n\t      // logger_1(data);\n\t      this.blendImageData.data.set(new Uint8ClampedArray(data));\n\t      // console.log(this.blendImageData);\n\t      this.blendCanvasCtx.putImageData(this.blendImageData, 0, 0);\n\t      this.previousImageData = this.currentImageData;\n\t    }\n\t\n\t    /*\n\t      blend two consecutive frames\n\t      returns imageData\n\t    */\n\t\n\t  }, {\n\t    key: 'blend',\n\t    value: function blend(canvas) {\n\t      var ctx = canvas.getContext('2d');\n\t      var width = canvas.width;\n\t      var height = canvas.height;\n\t      this.currentImageData = ctx.getImageData(0, 0, width, height);\n\t      this.previousImageData = this.previousImageData || ctx.getImageData(0, 0, width, height);\n\t      this.compare(this.currentImageData, this.previousImageData);\n\t    }\n\t  }, {\n\t    key: 'loop',\n\t    value: function loop() {\n\t      this.toCanvas(this.videoEl, this.rawCanvasEl);\n\t      this.blend(this.rawCanvasEl);\n\t      this.tickFn(this.loop.bind(this));\n\t    }\n\t  }, {\n\t    key: 'init',\n\t    value: function init() {\n\t      var _this = this;\n\t\n\t      console.log('DOM ready. Init...');\n\t\n\t      this.worker.addEventListener('message', this.drawBlendImage.bind(this));\n\t\n\t      this.createElements(this.containerClassName);\n\t      this.blendCanvasCtx = this.blendCanvasEl.getContext('2d');\n\t      this.blendImageData = this.blendCanvasCtx.getImageData(0, 0, this.sourceWidth, this.sourceHeight);\n\t\n\t      this.captureFn(this.captureConfig).then(function (blob) {\n\t        [_this.rawCanvasEl, _this.blendCanvasEl].forEach(_this.mirror);\n\t        _this.toVideo(blob, _this.videoEl);\n\t        _this.loop();\n\t      });\n\t      this.initialized = true;\n\t    }\n\t  }, {\n\t    key: 'createElements',\n\t    value: function createElements(containerClassName) {\n\t      this.containerEl = document.createElement('div');\n\t      this.containerEl.className = containerClassName;\n\t\n\t      this.videoEl = document.createElement('video');\n\t      this.videoEl.className = 'debug--video';\n\t      this.videoEl.setAttribute('autoplay', '');\n\t      this.videoEl.width = this.sourceWidth;\n\t      this.videoEl.height = this.sourceHeight;\n\t\n\t      this.rawCanvasEl = document.createElement('canvas');\n\t      this.rawCanvasEl.className = 'debug--raw-canvas';\n\t      this.rawCanvasEl.width = this.sourceWidth;\n\t      this.rawCanvasEl.height = this.sourceHeight;\n\t\n\t      this.blendCanvasEl = document.createElement('canvas');\n\t      this.blendCanvasEl.className = 'debug--blend-canvas';\n\t      this.blendCanvasEl.width = this.sourceWidth;\n\t      this.blendCanvasEl.height = this.sourceHeight;\n\t\n\t      this.headerEl = document.createElement('div');\n\t      this.headerEl.className = 'debug--header';\n\t\n\t      this.titleEl = document.createElement('h6');\n\t      this.titleEl.className = 'debug--title';\n\t      this.titleEl.innerText = 'Diffy debug view';\n\t\n\t      this.toggleEl = document.createElement('span');\n\t      this.toggleEl.innerText = '-';\n\t\n\t      this.headerEl.appendChild(this.toggleEl);\n\t      this.headerEl.appendChild(this.titleEl);\n\t\n\t      this.containerEl.appendChild(this.headerEl);\n\t      this.containerEl.appendChild(this.videoEl);\n\t      this.containerEl.appendChild(this.rawCanvasEl);\n\t      this.containerEl.appendChild(this.blendCanvasEl);\n\t\n\t      document.body.appendChild(this.containerEl);\n\t    }\n\t  }], [{\n\t    key: 'create',\n\t    value: function create(options) {\n\t      if (Diffy.instanceExists) {\n\t        throw new Error('It seems a diffy instance\\n      already exists on this page.');\n\t      }\n\t\n\t      return new this(options);\n\t      Diffy.instanceExists = true;\n\t    }\n\t  }, {\n\t    key: 'VERSION',\n\t    get: function get() {\n\t      return '1.0.0';\n\t    }\n\t  }, {\n\t    key: 'instanceExists',\n\t    get: function get() {\n\t      return false;\n\t    },\n\t    set: function set(bool) {\n\t      Diffy.instanceExists = bool;\n\t    }\n\t  }]);\n\t\n\t  return Diffy;\n\t}();\n\t\n\texports.default = Diffy;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = function() {\n\t\treturn __webpack_require__(4)(\"!function(r){function e(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return r[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var t={};return e.m=r,e.c=t,e.p=\\\"/\\\",e(0)}([function(r,e,t){\\\"use strict\\\";var n,o,a,u,i,c,f,s,d,l,p,v=t(1),g=(0,v.createOnceLog)(),x=function(r){var e;g(r),n=r.data,o=n.buffer,u=n.data1,i=n.data2,s=n.width,d=n.height,p=n.sensitivity,a=new Uint32Array(o);for(var t=0;t<d;++t)for(var x=0;x<s;++x)e=t*s+x,c=(u[4*e]+u[4*e+1]+u[4*e+2])/3/1,f=(i[4*e]+i[4*e+1]+i[4*e+2])/3/1,l=(0,v.polarize)((0,v.abs)(c-f),21),a[e]=255<<24|l<<16|l<<8|l;g(o)};onmessage=x},function(r,e){\\\"use strict\\\";Object.defineProperty(e,\\\"__esModule\\\",{value:!0});e.createOnceLog=function(){var r=0;return function(){if(r<1){var e;(e=console).log.apply(e,arguments)}r++}},e.$=function(r){return document.querySelector(r)},e.round=function(r){return r+.5>>0},e.abs=function(r){return(r^r>>31)-(r>>31)},e.polarize=function(r,e){return r>e?16711731:255}}]);\\n//# sourceMappingURL=b2706f17fe619ece6081.worker.js.map\", __webpack_require__.p + \"b2706f17fe619ece6081.worker.js\");\n\t};\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\t// http://stackoverflow.com/questions/10343913/how-to-create-a-web-worker-from-a-string\r\n\t\r\n\tvar URL = window.URL || window.webkitURL;\r\n\tmodule.exports = function(content, url) {\r\n\t\ttry {\r\n\t\t\ttry {\r\n\t\t\t\tvar blob;\r\n\t\t\t\ttry { // BlobBuilder = Deprecated, but widely implemented\r\n\t\t\t\t\tvar BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\r\n\t\t\t\t\tblob = new BlobBuilder();\r\n\t\t\t\t\tblob.append(content);\r\n\t\t\t\t\tblob = blob.getBlob();\r\n\t\t\t\t} catch(e) { // The proposed API\r\n\t\t\t\t\tblob = new Blob([content]);\r\n\t\t\t\t}\r\n\t\t\t\treturn new Worker(URL.createObjectURL(blob));\r\n\t\t\t} catch(e) {\r\n\t\t\t\treturn new Worker('data:application/javascript,' + encodeURIComponent(content));\r\n\t\t\t}\r\n\t\t} catch(e) {\r\n\t\t\treturn new Worker(url);\r\n\t\t}\r\n\t}\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/* eslint-disable no-console */\n\t\n\t/*\n\t  utility function to log only once\n\t  useful for logging in loops\n\t*/\n\tvar createOnceLog = exports.createOnceLog = function createOnceLog() {\n\t  var counter = 0;\n\t  return function onceLog() {\n\t    if (counter < 1) {\n\t      var _console;\n\t\n\t      (_console = console).log.apply(_console, arguments);\n\t    }\n\t    counter++;\n\t  };\n\t};\n\t\n\t/*\n\t  utility function for getting DOM references\n\t  return DOM Object\n\t*/\n\tvar $ = exports.$ = function $(selector) {\n\t  return document.querySelector(selector);\n\t};\n\t\n\t/*\n\t  bitwise Math.round\n\t  returns number\n\t*/\n\tvar round = exports.round = function round(number) {\n\t  return number + .5 >> 0;\n\t};\n\t\n\tvar abs = exports.abs = function abs(value) {\n\t  return (value ^ value >> 31) - (value >> 31);\n\t};\n\t\n\t/*\n\t  polarize pixel values based on value and threshold\n\t  returns 0 or 0XFF\n\t*/\n\tvar polarize = exports.polarize = function polarize(value, threshold) {\n\t  return value > threshold ? 0xFF0033 : 0XFF;\n\t};\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/*\n\t  shim requestAnimationFrame api\n\t  source: http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/\n\t*/\n\tvar requestAnimFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (callback) {\n\t  window.setTimeout(callback, 1000 / 60);\n\t};\n\t\n\texports.default = requestAnimFrame;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t/* eslint-disable no-unused-vars */\n\t/* eslint-disable no-console */\n\t/*\n\t  shim getUserMedia with a Promise api\n\t  source: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n\t*/\n\tvar getUserMedia = function getUserMedia(constraints, successCallback, errorCallback) {\n\t\n\t  // First get a hold of getUserMedia, if present\n\t  var getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n\t\n\t  // Some browsers just don't implement it - return a rejected promise with an error\n\t  // to keep a consistent interface\n\t  if (!getUserMedia) {\n\t    return Promise.reject(new Error('getUserMedia is not implemented in this browser'));\n\t  }\n\t\n\t  // Otherwise, wrap the call to the old navigator.getUserMedia with a Promise\n\t  return new Promise(function (successCallback, errorCallback) {\n\t    getUserMedia.call(navigator, constraints, successCallback, errorCallback);\n\t  });\n\t};\n\t\n\t// Older browsers might not implement mediaDevices at all, so we set an empty object first\n\tif (navigator.mediaDevices === undefined) {\n\t  navigator.mediaDevices = {};\n\t}\n\t\n\t// Some browsers partially implement mediaDevices. We can't just assign an object\n\t// with getUserMedia as it would overwrite existing properties.\n\t// Here, we will just add the getUserMedia property if it's missing.\n\tif (navigator.mediaDevices.getUserMedia === undefined) {\n\t  navigator.mediaDevices.getUserMedia = getUserMedia;\n\t}\n\t\n\t/*\n\t  capture from camera\n\t  returns objectUrl\n\t */\n\tvar capture = function capture(constraints) {\n\t  return navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n\t    return window.URL.createObjectURL(stream);\n\t  }).catch(function (_ref) {\n\t    var name = _ref.name,\n\t        message = _ref.message;\n\t    return console.error(name + ' : ' + message);\n\t  });\n\t};\n\t\n\texports.default = capture;\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// diffy.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 2da831bf345fd11ea350","/* eslint-disable no-console */\n\nimport Diffy from './Diffy';\nimport requestAnimFrame from './raf';\nimport capture from './capture';\nimport {\n  createOnceLog,\n  $,\n  round\n} from './utils';\n\n\nexport const create = ({ resolution }) => {\n  console.log('Create called');\n  return Diffy.create({\n    tickFn: requestAnimFrame,\n    captureFn: capture,\n    debug: true,\n    resolution\n  });\n\n}\n\n\n// /**/\n// const $debug = $('#diffy-debug');\n\n// /**/\n// const $toggle = $('#diffy-toggle');\n\n// /**/\n// const $video = $('#diffy-video');\n\n// /**/\n// const $rawCanvas = $('#diffy-raw-canvas');\n\n// /* */\n// const rawCtx = $rawCanvas.getContext('2d');\n\n// /* */\n// const rawWidth = $rawCanvas.width;\n\n// /* */\n// const rawHeight = $rawHeight.height;\n\n// /* */\n// const $blendCanvas = $('#diffy-blend-canvas');\n\n// /* */\n// const blendCtx = $blendCanvas.getContext('2d');\n\n// /* */\n// const blendWidth = $blendCanvas.width;\n\n// /* */\n// const blendHeight = $blendCanvas.height;\n\n// /* */\n// const blendImageData = blendCtx.getImageData(0, 0, blendWidth, blendHeight);\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import Worker from 'worker-loader?inline!./worker';\nimport { createOnceLog } from './utils';\n\n// tmp\nconst logger_1 = createOnceLog();\n\nexport default class Diffy {\n  constructor({\n    tickFn = () => {},\n    captureFn = () => {},\n    captureConfig = {\n      audio: false,\n      video: {\n        width: 130,\n        height: 100\n      }\n    },\n    debug = false,\n    sourceDimensions = { w: 130, h: 100 },\n    onTick = (values) => {},\n    onMotion = (values) => {},\n    sensitivity = 0.5,\n    containerClassName = 'diffy--debug-view',\n    resolution = { x: 10, y: 5 }\n  }) {\n\n    this.tickFn = tickFn.bind(window);\n    this.captureFn = captureFn;\n\n    this.currentImageData = null;\n    this.previousImageData = null;\n\n    this.resolutionX = resolution.x;\n    this.resolutionY = resolution.y;\n\n    this.sensitivity = sensitivity;\n\n    this.debug = debug;\n    this.containerClassName = containerClassName;\n\n    this.captureConfig = captureConfig;\n\n    this.sourceWidth = sourceDimensions.w;\n    this.sourceHeight = sourceDimensions.h;\n\n    this.worker = new Worker;\n\n    this.initialized = false;\n\n\n    // console.log('tickFn: ', this.tickFn);\n    // console.log('captureFn: ', this.captureFn);\n    // console.log('debug: ', this.debug);\n    // console.log('className: ', this.containerClassName);\n    // console.log('resolution: ', this.resolutionX, this.resolutionY);\n\n\n\n    window.addEventListener('load', this.init.bind(this));\n\n  }\n\n  toVideo(blob, videoEl) {\n    // piping blob to video element\n    videoEl.src = blob;\n  }\n\n  toCanvas(video, canvas) {\n    // piping video to canvas\n    canvas\n      .getContext('2d')\n      .drawImage(video, 0, 0, canvas.width, canvas.height);\n  }\n\n\n  mirror(canvas) {\n    const ctx = canvas.getContext('2d');\n    ctx.translate(canvas.width, 0);\n    ctx.scale(-1, 1);\n    return canvas;\n  }\n\n  compare(frame1, frame2) {\n    const length = frame1.length;\n    const data1 = frame1.data;\n    const data2 = frame2.data;\n\n    const buffer = new ArrayBuffer(length);\n    // console.log(this.sourceWidth, this.sourceHeight);\n    this.worker.postMessage({\n      buffer,\n      data1,\n      data2,\n      sensitivity: this.sensitivity,\n      width: this.sourceWidth,\n      height: this.sourceHeight\n    });\n\n  }\n\n  drawBlendImage({ data }) {\n    // logger_1(data);\n    this.blendImageData\n      .data\n      .set(\n        new Uint8ClampedArray(data)\n      );\n    // console.log(this.blendImageData);\n    this.blendCanvasCtx.putImageData(this.blendImageData, 0, 0);\n    this.previousImageData = this.currentImageData;\n  }\n\n  /*\n    blend two consecutive frames\n    returns imageData\n  */\n  blend(canvas) {\n    const ctx = canvas.getContext('2d');\n    const width = canvas.width;\n    const height = canvas.height;\n    this.currentImageData = ctx.getImageData(0, 0, width, height);\n    this.previousImageData = this.previousImageData || ctx.getImageData(0, 0, width, height);\n    this.compare(this.currentImageData, this.previousImageData);\n  }\n\n  loop() {\n    this.toCanvas(this.videoEl, this.rawCanvasEl);\n    this.blend(this.rawCanvasEl);\n    this.tickFn(this.loop.bind(this));\n  }\n\n  init() {\n    console.log('DOM ready. Init...');\n\n    this.worker.addEventListener('message', this.drawBlendImage.bind(this));\n\n    this.createElements(this.containerClassName);\n    this.blendCanvasCtx = this.blendCanvasEl.getContext('2d');\n    this.blendImageData = this.blendCanvasCtx.getImageData(0, 0, this.sourceWidth, this.sourceHeight);\n\n    this.captureFn(this.captureConfig).then((blob) => {\n      [this.rawCanvasEl, this.blendCanvasEl].forEach(this.mirror);\n      this.toVideo(blob, this.videoEl);\n      this.loop();\n    });\n    this.initialized = true;\n  }\n\n  createElements(containerClassName) {\n    this.containerEl = document.createElement('div');\n    this.containerEl.className = containerClassName;\n\n    this.videoEl = document.createElement('video');\n    this.videoEl.className = 'debug--video';\n    this.videoEl.setAttribute('autoplay', '');\n    this.videoEl.width = this.sourceWidth;\n    this.videoEl.height = this.sourceHeight;\n\n    this.rawCanvasEl = document.createElement('canvas');\n    this.rawCanvasEl.className = 'debug--raw-canvas';\n    this.rawCanvasEl.width = this.sourceWidth;\n    this.rawCanvasEl.height = this.sourceHeight;\n\n    this.blendCanvasEl = document.createElement('canvas');\n    this.blendCanvasEl.className = 'debug--blend-canvas';\n    this.blendCanvasEl.width = this.sourceWidth;\n    this.blendCanvasEl.height = this.sourceHeight;\n\n\n    this.headerEl = document.createElement('div');\n    this.headerEl.className = 'debug--header';\n\n    this.titleEl = document.createElement('h6');\n    this.titleEl.className = 'debug--title';\n    this.titleEl.innerText = 'Diffy debug view';\n\n    this.toggleEl = document.createElement('span');\n    this.toggleEl.innerText = '-';\n\n    this.headerEl.appendChild(this.toggleEl);\n    this.headerEl.appendChild(this.titleEl);\n\n    this.containerEl.appendChild(this.headerEl);\n    this.containerEl.appendChild(this.videoEl);\n    this.containerEl.appendChild(this.rawCanvasEl);\n    this.containerEl.appendChild(this.blendCanvasEl);\n\n    document.body.appendChild(this.containerEl);\n  }\n\n\n  static get VERSION() {\n    return '1.0.0';\n  }\n\n  static get instanceExists() {\n    return false;\n  }\n\n  static set instanceExists(bool) {\n    Diffy.instanceExists = bool;\n  }\n\n\n  static create(options) {\n    if(Diffy.instanceExists) {\n      throw new Error(`It seems a diffy instance\n      already exists on this page.`);\n    }\n\n    return new this(options);\n    Diffy.instanceExists = true;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Diffy.js","module.exports = function() {\n\treturn require(\"!!/Users/maninilchiani/Self/diffyjs/node_modules/worker-loader/createInlineWorker.js\")(\"!function(r){function e(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return r[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var t={};return e.m=r,e.c=t,e.p=\\\"/\\\",e(0)}([function(r,e,t){\\\"use strict\\\";var n,o,a,u,i,c,f,s,d,l,p,v=t(1),g=(0,v.createOnceLog)(),x=function(r){var e;g(r),n=r.data,o=n.buffer,u=n.data1,i=n.data2,s=n.width,d=n.height,p=n.sensitivity,a=new Uint32Array(o);for(var t=0;t<d;++t)for(var x=0;x<s;++x)e=t*s+x,c=(u[4*e]+u[4*e+1]+u[4*e+2])/3/1,f=(i[4*e]+i[4*e+1]+i[4*e+2])/3/1,l=(0,v.polarize)((0,v.abs)(c-f),21),a[e]=255<<24|l<<16|l<<8|l;g(o)};onmessage=x},function(r,e){\\\"use strict\\\";Object.defineProperty(e,\\\"__esModule\\\",{value:!0});e.createOnceLog=function(){var r=0;return function(){if(r<1){var e;(e=console).log.apply(e,arguments)}r++}},e.$=function(r){return document.querySelector(r)},e.round=function(r){return r+.5>>0},e.abs=function(r){return(r^r>>31)-(r>>31)},e.polarize=function(r,e){return r>e?16711731:255}}]);\\n//# sourceMappingURL=b2706f17fe619ece6081.worker.js.map\", __webpack_public_path__ + \"b2706f17fe619ece6081.worker.js\");\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/worker-loader?inline!./src/worker.js\n// module id = 3\n// module chunks = 0","// http://stackoverflow.com/questions/10343913/how-to-create-a-web-worker-from-a-string\r\n\r\nvar URL = window.URL || window.webkitURL;\r\nmodule.exports = function(content, url) {\r\n\ttry {\r\n\t\ttry {\r\n\t\t\tvar blob;\r\n\t\t\ttry { // BlobBuilder = Deprecated, but widely implemented\r\n\t\t\t\tvar BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\r\n\t\t\t\tblob = new BlobBuilder();\r\n\t\t\t\tblob.append(content);\r\n\t\t\t\tblob = blob.getBlob();\r\n\t\t\t} catch(e) { // The proposed API\r\n\t\t\t\tblob = new Blob([content]);\r\n\t\t\t}\r\n\t\t\treturn new Worker(URL.createObjectURL(blob));\r\n\t\t} catch(e) {\r\n\t\t\treturn new Worker('data:application/javascript,' + encodeURIComponent(content));\r\n\t\t}\r\n\t} catch(e) {\r\n\t\treturn new Worker(url);\r\n\t}\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/worker-loader/createInlineWorker.js\n// module id = 4\n// module chunks = 0","/* eslint-disable no-console */\n\n/*\n  utility function to log only once\n  useful for logging in loops\n*/\nexport const createOnceLog = () => {\n  let counter = 0;\n  return function onceLog() {\n    if(counter < 1) {\n      console.log(...arguments);\n    }\n    counter ++;\n  }\n}\n\n/*\n  utility function for getting DOM references\n  return DOM Object\n*/\nexport const $ = (selector) => document.querySelector(selector);\n\n/*\n  bitwise Math.round\n  returns number\n*/\nexport const round = (number) => (number + .5) >> 0;\n\n\nexport const abs = (value) => (value ^ (value >> 31)) - (value >> 31);\n\n\n/*\n  polarize pixel values based on value and threshold\n  returns 0 or 0XFF\n*/\nexport const polarize = (value, threshold) => (value > threshold) ? 0xFF0033 : 0XFF;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","/*\n  shim requestAnimationFrame api\n  source: http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/\n*/\nconst requestAnimFrame =\n  window.requestAnimationFrame       ||\n  window.webkitRequestAnimationFrame ||\n  window.mozRequestAnimationFrame    ||\n  window.oRequestAnimationFrame      ||\n  window.msRequestAnimationFrame     ||\n  function(callback) {\n    window.setTimeout(callback, 1000 / 60);\n  };\n\nexport default requestAnimFrame;\n\n\n\n// WEBPACK FOOTER //\n// ./src/raf.js","/* eslint-disable no-unused-vars */\n/* eslint-disable no-console */\n/*\n  shim getUserMedia with a Promise api\n  source: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n*/\nconst getUserMedia = (constraints, successCallback, errorCallback) => {\n\n  // First get a hold of getUserMedia, if present\n  const getUserMedia = (navigator.getUserMedia ||\n      navigator.webkitGetUserMedia ||\n      navigator.mozGetUserMedia);\n\n  // Some browsers just don't implement it - return a rejected promise with an error\n  // to keep a consistent interface\n  if(!getUserMedia) {\n    return Promise.reject(new Error('getUserMedia is not implemented in this browser'));\n  }\n\n  // Otherwise, wrap the call to the old navigator.getUserMedia with a Promise\n  return new Promise((successCallback, errorCallback) => {\n    getUserMedia.call(navigator, constraints, successCallback, errorCallback);\n  });\n\n}\n\n// Older browsers might not implement mediaDevices at all, so we set an empty object first\nif(navigator.mediaDevices === undefined) {\n  navigator.mediaDevices = {};\n}\n\n// Some browsers partially implement mediaDevices. We can't just assign an object\n// with getUserMedia as it would overwrite existing properties.\n// Here, we will just add the getUserMedia property if it's missing.\nif(navigator.mediaDevices.getUserMedia === undefined) {\n  navigator.mediaDevices.getUserMedia = getUserMedia;\n}\n\n/*\n  capture from camera\n  returns objectUrl\n */\nconst capture = (constraints) => {\n  return navigator.mediaDevices.getUserMedia(constraints)\n    .then((stream) => window.URL.createObjectURL(stream))\n    .catch(({ name, message }) => console.error(`${name} : ${message}`));\n}\n\nexport default capture;\n\n\n\n// WEBPACK FOOTER //\n// ./src/capture.js"],"sourceRoot":""}