{"version":3,"sources":["webpack:///webpack/bootstrap 259cebfa0f10f5b3baf6","webpack:///./demo/src/index.js","webpack:///./dist/diffy.min.js","webpack:///(webpack)/buildin/module.js"],"names":["gridCanvas","document","querySelector","gridCtx","getContext","gridWidth","gridHeight","resolutionX","resolutionY","cellWidth","cellHeight","PI","Math","radius","drawGrid","matrix","forEach","row","rowIdx","column","colIdx","beginPath","fillStyle","arc","fill","closePath","diffy","resolution","x","y","sensitivity","threshold","debug","containerClassName","sourceDimensions","w","h","onFrame","window","e","t","exports","module","Diffy","n","i","r","id","loaded","call","m","c","p","__esModule","default","defineProperty","value","create","a","o","s","d","l","u","f","Error","v","tickFn","captureFn","DiffWorker","roundFn","round","win","doc","TypeError","length","enumerable","configurable","writable","Object","key","prototype","g","b","E","C","k","D","F","j","M","I","W","audio","video","width","height","captureConfig","assign","bind","currentImageData","previousImageData","debugViewCollapsed","sourceWidth","sourceHeight","worker","initialized","VERSION","addEventListener","init","src","drawImage","translate","scale","data","ArrayBuffer","postMessage","buffer","data1","data2","blendImageData","set","Uint8ClampedArray","blendCanvasCtx","putImageData","getImageData","compare","push","toCanvas","videoEl","rawCanvasEl","blend","createMatrix","loop","drawBlendImageFromBuffer","initDom","blendCanvasEl","then","mirror","toVideo","containerEl","createElement","className","setAttribute","headerEl","titleEl","innerText","toggleEl","preventDefault","classList","remove","add","appendChild","body","innerHTML","createElements","injectCssStyles","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","Promise","reject","mediaDevices","URL","createObjectURL","catch","name","message","console","error","webkitURL","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","append","getBlob","Blob","Worker","encodeURIComponent","createOnceLog","log","apply","arguments","$","abs","polarize"],"mappings":"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","file":"demo.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 259cebfa0f10f5b3baf6","/* eslint-disable no-console */\n\nimport { create } from '../../dist/diffy.min.js';\n\nconst gridCanvas = document.querySelector('#grid-canvas');\nconst gridCtx = gridCanvas.getContext('2d');\nconst gridWidth = 1040;\nconst gridHeight = 800;\nconst resolutionX = 20;\nconst resolutionY = 15;\nconst cellWidth = gridWidth / resolutionX;\nconst cellHeight = gridHeight / resolutionY;\nconst PI = Math.PI;\n\nlet radius = 0;\n\nfunction drawGrid(matrix) {\n  matrix.forEach((row, rowIdx) => {\n    row.forEach((column, colIdx) => {\n      radius = 10;\n      gridCtx.beginPath();\n      gridCtx.fillStyle = `rgb(${column}, ${column}, ${column})`;\n      gridCtx.arc(rowIdx * cellWidth, colIdx * cellHeight, radius, 0, (2 * PI), false);\n      gridCtx.fill();\n      gridCtx.closePath();\n    });\n  });\n}\n\nconst diffy = create({\n  resolution: { x: resolutionX, y: resolutionY },\n  sensitivity: 0.2,\n  threshold: 21,\n  debug: true,\n  containerClassName: 'diffy--demo-debugger',\n  sourceDimensions: { w: 130, h: 100},\n  onFrame: drawGrid\n});\n\nwindow.diffy = diffy;\n\n\n\n// WEBPACK FOOTER //\n// ./demo/src/index.js","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.Diffy=t():e.Diffy=t()}(this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var i={};return t.m=e,t.c=i,t.p=\"/\",t(0)}([function(e,t,i){e.exports=i(1)},function(e,t,i){\"use strict\";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.create=void 0;var r=i(2),a=n(r),o=i(3),s=n(o),d=i(4),l=n(d),u=i(5),h=n(u),c=i(7),f=!1;t.create=function(e){var t=e.resolution,i=e.sensitivity,n=e.threshold,r=e.debug,o=e.onFrame,d=e.sourceDimensions,u=e.containerClassName;if(!window)throw new Error(\"\\n      Diffy.js is meant to be used in the browser. :^)\\n      For more info, see: https://github.com/maniart/diffyjs/blob/master/README.md\\n    \");if(!(\"Worker\"in window))throw new Error(\"\\n      Diffy.js requires Web Workers.\\n      It looks like this environment does not support this feature. :(\\n      For more info, see: https://github.com/maniart/diffyjs/blob/master/README.md\\n    \");if(f)throw new Error(\"\\n      Yikes! It seems like a Diffy.js instance already exists on this page. :|\\n      For more info, see: https://github.com/maniart/diffyjs/blob/master/README.md\\n    \");var v=a.default.create({tickFn:s.default,captureFn:l.default,DiffWorker:h.default,roundFn:c.round,win:window,doc:document,resolution:t,sensitivity:i,threshold:n,debug:r,onFrame:o,sourceDimensions:d,containerClassName:u});return f=!0,v}},function(e,t){\"use strict\";function i(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(t){var n=t.tickFn,r=void 0===n?function(){}:n,a=t.captureFn,o=void 0===a?function(){}:a,s=t.DiffWorker,d=void 0===s?function(){}:s,l=t.roundFn,u=void 0===l?function(){}:l,h=t.win,c=void 0===h?{}:h,f=t.doc,v=void 0===f?{}:f,g=t.debug,m=void 0!==g&&g,p=t.sourceDimensions,w=void 0===p?{w:130,h:100}:p,b=t.onFrame,E=void 0===b?function(){}:b,y=t.sensitivity,C=void 0===y?.2:y,x=t.threshold,k=void 0===x?21:x,D=t.containerClassName,F=void 0===D?\"diffy--debug-view\":D,j=t.resolution,M=void 0===j?{x:10,y:5}:j;i(this,e);var I=c;this.doc=v;var W={audio:!1,video:{width:130,height:100}};this.captureConfig=Object.assign({},W,{video:{width:w.w,height:w.h}}),this.tickFn=r.bind(I),this.captureFn=o,this.roundFn=u,this.onFrame=E,this.currentImageData=null,this.previousImageData=null,this.resolutionX=M.x,this.resolutionY=M.y,this.sensitivity=C,this.threshold=k,this.debug=m,this.containerClassName=F,this.debugViewCollapsed=!1,this.sourceWidth=w.w,this.sourceHeight=w.h,this.worker=new d,this.initialized=!1,this.VERSION=\"1.0.1\",I.addEventListener(\"load\",this.init.bind(this))}return n(e,[{key:\"toVideo\",value:function(e,t){t.src=e}},{key:\"toCanvas\",value:function(e,t){t.getContext(\"2d\").drawImage(e,0,0,t.width,t.height)}},{key:\"mirror\",value:function(e){var t=e.getContext(\"2d\");return t.translate(e.width,0),t.scale(-1,1),e}},{key:\"compare\",value:function(e,t){var i=e.data,n=t.data,r=i.length,a=new ArrayBuffer(r);this.worker.postMessage({buffer:a,data1:i,data2:n,sensitivity:this.sensitivity,threshold:this.threshold,width:this.sourceWidth,height:this.sourceHeight})}},{key:\"drawBlendImageFromBuffer\",value:function(e){this.blendImageData.data.set(new Uint8ClampedArray(e)),this.blendCanvasCtx.putImageData(this.blendImageData,0,0),this.previousImageData=this.currentImageData}},{key:\"blend\",value:function(e){var t=e.getContext(\"2d\"),i=e.width,n=e.height;this.currentImageData=t.getImageData(0,0,i,n),this.previousImageData=this.previousImageData||t.getImageData(0,0,i,n),this.compare(this.currentImageData,this.previousImageData)}},{key:\"createMatrix\",value:function(){var e=void 0,t=void 0,i=0,n=[],r=this.sourceWidth,a=this.sourceHeight,o=this.sourceWidth/this.resolutionX,s=this.sourceHeight/this.resolutionY,d=null,l=void 0,u=void 0,h=0;for(e=0;e<r;e+=o){var c=[];for(t=0;t<a;t+=s){for(d=this.blendCanvasCtx.getImageData(e,t,o,s).data,l=d.length,u=l/4;i<u;)h+=(d[4*i]+d[4*i+1]+d[4*i+2])/3,++i;h=this.roundFn(h/u),c.push(h),h=0,i=0}n.push(c)}return n}},{key:\"loop\",value:function(){this.toCanvas(this.videoEl,this.rawCanvasEl),this.blend(this.rawCanvasEl),this.onFrame(this.createMatrix()),this.tickFn(this.loop.bind(this))}},{key:\"init\",value:function(){var e=this;this.worker.addEventListener(\"error\",function(e){throw e}),this.worker.addEventListener(\"message\",function(t){var i=t.data;e.drawBlendImageFromBuffer(i)}),this.initDom(this.containerClassName),this.blendCanvasCtx=this.blendCanvasEl.getContext(\"2d\"),this.blendImageData=this.blendCanvasCtx.getImageData(0,0,this.sourceWidth,this.sourceHeight),this.captureFn(this.captureConfig).then(function(t){[e.rawCanvasEl,e.blendCanvasEl].forEach(e.mirror),e.toVideo(t,e.videoEl),e.loop()}),this.initialized=!0}},{key:\"createElements\",value:function(e){var t=this;this.containerEl=this.doc.createElement(\"div\"),this.containerEl.className=e,this.videoEl=this.doc.createElement(\"video\"),this.videoEl.className=\"video view\",this.videoEl.setAttribute(\"autoplay\",\"\"),this.videoEl.width=this.sourceWidth,this.videoEl.height=this.sourceHeight,this.rawCanvasEl=this.doc.createElement(\"canvas\"),this.rawCanvasEl.className=\"canvas--raw view\",this.rawCanvasEl.width=this.sourceWidth,this.rawCanvasEl.height=this.sourceHeight,this.blendCanvasEl=this.doc.createElement(\"canvas\"),this.blendCanvasEl.className=\"canvas--blend view\",this.blendCanvasEl.width=this.sourceWidth,this.blendCanvasEl.height=this.sourceHeight,this.headerEl=this.doc.createElement(\"header\"),this.headerEl.className=\"header\",this.titleEl=this.doc.createElement(\"h1\"),this.titleEl.className=\"title\",this.titleEl.innerText=\"Diffy debug view\",this.toggleEl=this.doc.createElement(\"span\"),this.toggleEl.className=\"toggle\",this.toggleEl.innerText=\"-\",this.headerEl.addEventListener(\"click\",function(e){e.preventDefault(),[t.videoEl,t.rawCanvasEl,t.blendCanvasEl].forEach(function(e){t.debugViewCollapsed?(e.classList.remove(\"hidden\"),t.toggleEl.innerText=\"-\"):(e.classList.add(\"hidden\"),t.toggleEl.innerText=\"+\")}),t.debugViewCollapsed=!t.debugViewCollapsed}),this.headerEl.appendChild(this.toggleEl),this.headerEl.appendChild(this.titleEl),this.containerEl.appendChild(this.headerEl),this.containerEl.appendChild(this.videoEl),this.containerEl.appendChild(this.rawCanvasEl),this.containerEl.appendChild(this.blendCanvasEl),this.doc.body.appendChild(this.containerEl),this.debug||this.containerEl.classList.add(\"hidden\")}},{key:\"injectCssStyles\",value:function(){var e=this.doc.createElement(\"style\"),t=this.containerClassName,i=\"\\n      .\"+t+' {\\n        position: fixed;\\n        top: 0;\\n        left: 0;\\n        font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\\n        background-color: #000;\\n        border: 4px solid #000;\\n        color: #fff;\\n      }\\n      .'+t+\" .header {\\n        width: 100%;\\n        background-color: #000;\\n        font-size: 16px;\\n        cursor: pointer;\\n      }\\n      .\"+t+\" .title {\\n        display: inline;\\n        margin-left: 10px;\\n        font-weight: 300;\\n        letter-spacing: 2px;\\n        font-size: 16px;\\n      }\\n      .\"+t+\" .toggle { padding: 5px; }\\n      .\"+t+\" .view { padding: 5px; }\\n      .\"+t+\" .view.hidden, .\"+t+\".hidden { display: none; }\\n    \";e.innerHTML=i,this.doc.body.appendChild(e)}},{key:\"initDom\",value:function(e){this.createElements(e),this.injectCssStyles()}}],[{key:\"create\",value:function(e){return new this(e)}}]),e}();t.default=r},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};t.default=i},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var i=function e(t,i,n){var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return e?new Promise(function(i,n){e.call(navigator,t,i,n)}):Promise.reject(new Error(\"getUserMedia is not implemented in this browser\"))};void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=i);var n=function(e){return navigator.mediaDevices.getUserMedia(e).then(function(e){return window.URL.createObjectURL(e)}).catch(function(e){var t=e.name,i=e.message;return console.error(t+\" : \"+i)})};t.default=n},function(e,t,i){e.exports=function(){return i(6)('!function(r){function e(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return r[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var t={};return e.m=r,e.c=t,e.p=\"/\",e(0)}([function(r,e,t){\"use strict\";var n=t(1),o=void 0,i=void 0,a=void 0,u=void 0,c=void 0,s=function(r){var e=r.data,t=e.buffer,s=e.data1,d=e.data2,f=e.width,v=e.height,l=e.sensitivity,p=e.threshold,g=0;c=1-l,o=new Uint32Array(t);for(var h=0;h<v;++h)for(var x=0;x<f;++x)g=h*f+x,i=(s[4*g]+s[4*g+1]+s[4*g+2])/3/c,a=(d[4*g]+d[4*g+1]+d[4*g+2])/3/c,u=(0,n.polarize)((0,n.abs)(i-a),p),o[g]=255<<24|u<<16|u<<8|u;postMessage(t)};onmessage=s},function(r,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});e.createOnceLog=function(){var r=0;return function(){if(r<1){var e;(e=console).log.apply(e,arguments)}r++}},e.$=function(r){return document.querySelector(r)},e.round=function(r){return r+.5>>0},e.abs=function(r){return(r^r>>31)-(r>>31)},e.polarize=function(r,e){return r>e?0:255}}]);\\n//# sourceMappingURL=4c4717f30fba17538544.worker.js.map',i.p+\"4c4717f30fba17538544.worker.js\")}},function(e,t){var i=window.URL||window.webkitURL;e.exports=function(e,t){try{try{var n;try{var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;n=new r,n.append(e),n=n.getBlob()}catch(t){n=new Blob([e])}return new Worker(i.createObjectURL(n))}catch(t){return new Worker(\"data:application/javascript,\"+encodeURIComponent(e))}}catch(e){return new Worker(t)}}},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.createOnceLog=function(){var e=0;return function(){if(e<1){var t;(t=console).log.apply(t,arguments)}e++}},t.$=function(e){return document.querySelector(e)},t.round=function(e){return e+.5>>0},t.abs=function(e){return(e^e>>31)-(e>>31)},t.polarize=function(e,t){return e>t?0:255}}])});\n//# sourceMappingURL=diffy.min.js.map\n\n\n// WEBPACK FOOTER //\n// ./dist/diffy.min.js","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}