{"version":3,"sources":["webpack:///webpack/bootstrap 58505f163628456bee43","webpack:///./demo/src/index.js","webpack:///./dist/diffy.min.js","webpack:///(webpack)/buildin/module.js"],"names":["diffy","resolution","x","y","e","t","exports","module","i","n","a","id","loaded","call","m","c","p","__esModule","default","defineProperty","value","create","r","o","s","u","d","console","log","tickFn","captureFn","debug","TypeError","length","enumerable","configurable","writable","Object","key","prototype","createOnceLog","captureConfig","audio","video","width","height","l","h","sourceDimensions","v","w","f","onTick","onMotion","sensitivity","g","containerClassName","b","bind","window","currentImageData","previousImageData","resolutionX","resolutionY","sourceWidth","sourceHeight","worker","initialized","addEventListener","init","src","getContext","drawImage","translate","scale","data","ArrayBuffer","postMessage","buffer","data1","data2","blendImageData","set","Uint8ClampedArray","blendCanvasCtx","putImageData","getImageData","compare","toCanvas","videoEl","rawCanvasEl","blend","loop","drawBlendImage","createElements","blendCanvasEl","then","forEach","mirror","toVideo","containerEl","document","createElement","className","setAttribute","headerEl","titleEl","innerText","toggleEl","appendChild","body","instanceExists","Error","get","URL","webkitURL","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","append","getBlob","Blob","Worker","createObjectURL","encodeURIComponent","apply","arguments","$","querySelector","round","abs","polarize","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","Promise","reject","mediaDevices","catch","name","message","error"],"mappings":"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","file":"demo.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 58505f163628456bee43","/* eslint-disable no-console */\n\nimport { create as createDiffy } from '../../dist/diffy.min.js';\n\nconst diffy = createDiffy({\n  resolution: { x: 20, y: 15 }\n});\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./demo/src/index.js","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.diffy=t():e.diffy=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p=\"/\",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){\"use strict\";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,\"__esModule\",{value:!0}),t.create=void 0;var a=n(2),r=i(a),o=n(6),s=i(o),u=n(7),d=i(u);n(5),t.create=function(e){var t=e.resolution;return console.log(\"Create called\"),r.default.create({tickFn:s.default,captureFn:d.default,debug:!0,resolution:t})}},function(e,t,n){\"use strict\";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,\"value\"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(3),s=i(o),u=n(5),d=((0,u.createOnceLog)(),function(){function e(t){var n=t.tickFn,i=void 0===n?function(){}:n,r=t.captureFn,o=void 0===r?function(){}:r,u=t.captureConfig,d=void 0===u?{audio:!1,video:{width:130,height:100}}:u,c=t.debug,l=void 0!==c&&c,h=t.sourceDimensions,v=void 0===h?{w:130,h:100}:h,f=(t.onTick,t.onMotion,t.sensitivity),g=void 0===f?.5:f,m=t.containerClassName,p=void 0===m?\"diffy--debug-view\":m,w=t.resolution,b=void 0===w?{x:10,y:5}:w;a(this,e),this.tickFn=i.bind(window),this.captureFn=o,this.currentImageData=null,this.previousImageData=null,this.resolutionX=b.x,this.resolutionY=b.y,this.sensitivity=g,this.debug=l,this.containerClassName=p,this.captureConfig=d,this.sourceWidth=v.w,this.sourceHeight=v.h,this.worker=new s.default,this.initialized=!1,window.addEventListener(\"load\",this.init.bind(this))}return r(e,[{key:\"toVideo\",value:function(e,t){t.src=e}},{key:\"toCanvas\",value:function(e,t){t.getContext(\"2d\").drawImage(e,0,0,t.width,t.height)}},{key:\"mirror\",value:function(e){var t=e.getContext(\"2d\");return t.translate(e.width,0),t.scale(-1,1),e}},{key:\"compare\",value:function(e,t){var n=e.length,i=e.data,a=t.data,r=new ArrayBuffer(n);this.worker.postMessage({buffer:r,data1:i,data2:a,sensitivity:this.sensitivity,width:this.sourceWidth,height:this.sourceHeight})}},{key:\"drawBlendImage\",value:function(e){var t=e.data;this.blendImageData.data.set(new Uint8ClampedArray(t)),this.blendCanvasCtx.putImageData(this.blendImageData,0,0),this.previousImageData=this.currentImageData}},{key:\"blend\",value:function(e){var t=e.getContext(\"2d\"),n=e.width,i=e.height;this.currentImageData=t.getImageData(0,0,n,i),this.previousImageData=this.previousImageData||t.getImageData(0,0,n,i),this.compare(this.currentImageData,this.previousImageData)}},{key:\"loop\",value:function(){this.toCanvas(this.videoEl,this.rawCanvasEl),this.blend(this.rawCanvasEl),this.tickFn(this.loop.bind(this))}},{key:\"init\",value:function(){var e=this;console.log(\"DOM ready. Init...\"),this.worker.addEventListener(\"message\",this.drawBlendImage.bind(this)),this.createElements(this.containerClassName),this.blendCanvasCtx=this.blendCanvasEl.getContext(\"2d\"),this.blendImageData=this.blendCanvasCtx.getImageData(0,0,this.sourceWidth,this.sourceHeight),this.captureFn(this.captureConfig).then(function(t){[e.rawCanvasEl,e.blendCanvasEl].forEach(e.mirror),e.toVideo(t,e.videoEl),e.loop()}),this.initialized=!0}},{key:\"createElements\",value:function(e){this.containerEl=document.createElement(\"div\"),this.containerEl.className=e,this.videoEl=document.createElement(\"video\"),this.videoEl.className=\"debug--video\",this.videoEl.setAttribute(\"autoplay\",\"\"),this.videoEl.width=this.sourceWidth,this.videoEl.height=this.sourceHeight,this.rawCanvasEl=document.createElement(\"canvas\"),this.rawCanvasEl.className=\"debug--raw-canvas\",this.rawCanvasEl.width=this.sourceWidth,this.rawCanvasEl.height=this.sourceHeight,this.blendCanvasEl=document.createElement(\"canvas\"),this.blendCanvasEl.className=\"debug--blend-canvas\",this.blendCanvasEl.width=this.sourceWidth,this.blendCanvasEl.height=this.sourceHeight,this.headerEl=document.createElement(\"div\"),this.headerEl.className=\"debug--header\",this.titleEl=document.createElement(\"h6\"),this.titleEl.className=\"debug--title\",this.titleEl.innerText=\"Diffy debug view\",this.toggleEl=document.createElement(\"span\"),this.toggleEl.innerText=\"-\",this.headerEl.appendChild(this.toggleEl),this.headerEl.appendChild(this.titleEl),this.containerEl.appendChild(this.headerEl),this.containerEl.appendChild(this.videoEl),this.containerEl.appendChild(this.rawCanvasEl),this.containerEl.appendChild(this.blendCanvasEl),document.body.appendChild(this.containerEl)}}],[{key:\"create\",value:function(t){if(e.instanceExists)throw new Error(\"It seems a diffy instance\\n      already exists on this page.\");return new this(t)}},{key:\"VERSION\",get:function(){return\"1.0.0\"}},{key:\"instanceExists\",get:function(){return!1},set:function(t){e.instanceExists=t}}]),e}());t.default=d},function(e,t,n){e.exports=function(){return n(4)('!function(r){function e(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return r[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var t={};return e.m=r,e.c=t,e.p=\"/\",e(0)}([function(r,e,t){\"use strict\";var n,o,a,u,i,c,f,s,d,l,p,v=t(1),g=(0,v.createOnceLog)(),x=function(r){var e;g(r),n=r.data,o=n.buffer,u=n.data1,i=n.data2,s=n.width,d=n.height,p=n.sensitivity,a=new Uint32Array(o);for(var t=0;t<d;++t)for(var x=0;x<s;++x)e=t*s+x,c=(u[4*e]+u[4*e+1]+u[4*e+2])/3/1,f=(i[4*e]+i[4*e+1]+i[4*e+2])/3/1,l=(0,v.polarize)((0,v.abs)(c-f),21),a[e]=255<<24|l<<16|l<<8|l;g(o)};onmessage=x},function(r,e){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});e.createOnceLog=function(){var r=0;return function(){if(r<1){var e;(e=console).log.apply(e,arguments)}r++}},e.$=function(r){return document.querySelector(r)},e.round=function(r){return r+.5>>0},e.abs=function(r){return(r^r>>31)-(r>>31)},e.polarize=function(r,e){return r>e?16711731:255}}]);\\n//# sourceMappingURL=b2706f17fe619ece6081.worker.js.map',n.p+\"b2706f17fe619ece6081.worker.js\")}},function(e,t){var n=window.URL||window.webkitURL;e.exports=function(e,t){try{try{var i;try{var a=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;i=new a,i.append(e),i=i.getBlob()}catch(t){i=new Blob([e])}return new Worker(n.createObjectURL(i))}catch(t){return new Worker(\"data:application/javascript,\"+encodeURIComponent(e))}}catch(e){return new Worker(t)}}},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});t.createOnceLog=function(){var e=0;return function(){if(e<1){var t;(t=console).log.apply(t,arguments)}e++}},t.$=function(e){return document.querySelector(e)},t.round=function(e){return e+.5>>0},t.abs=function(e){return(e^e>>31)-(e>>31)},t.polarize=function(e,t){return e>t?16711731:255}},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};t.default=n},function(e,t){\"use strict\";Object.defineProperty(t,\"__esModule\",{value:!0});var n=function e(t,n,i){var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return e?new Promise(function(n,i){e.call(navigator,t,n,i)}):Promise.reject(new Error(\"getUserMedia is not implemented in this browser\"))};void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=n);var i=function(e){return navigator.mediaDevices.getUserMedia(e).then(function(e){return window.URL.createObjectURL(e)}).catch(function(e){var t=e.name,n=e.message;return console.error(t+\" : \"+n)})};t.default=i}])});\n//# sourceMappingURL=diffy.min.js.map\n\n\n// WEBPACK FOOTER //\n// ./dist/diffy.min.js","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}